<!DOCTYPE html>
<html lang="en">

<head>
    <title>CatTD - Login</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="src/img/icon.png" type="image/x-icon" />
    <link href="https://fonts.googleapis.com/css?family=Carter+One" rel="stylesheet" />
    <link rel="stylesheet" href="src/css/Styles.css" />

    <script type="application/javascript" src="src/js/cookies.js"></script>
    <script>
        if (getCookie('username') != null) {
            window.open("src/CatTD_lobby.html", "_self");
        }
    </script>
</head>

<body>
    <div id="outercontainer">
        <div id="innercontainer">
            <header>
                <a href="index.html"><img id="header-logo" src="src/img/icon.gif" /></a>
            </header>
            <div id="contentdiv">
                <div id="forms_div">
                    <div class="formdiv">
                        <div class="formtitle">Account Login</div>
                        <div>
                            <div id="coming-soon-overlay-text">COMING SOON</div>
                            <div>
                                <input class="input_deact" id="email" type="text" name="E-Mail" placeholder="E-Mail"
                                    disabled />
                            </div>
                            <div>
                                <input class="input_deact" id="password" type="password" name="Passwort"
                                    placeholder="Passwort" disabled />
                            </div>
                            <div>
                                <button class="game-button deact" id="formSubmit2">　</button>
                            </div>
                            <div class="error_messages"></div>
                        </div>
                    </div>
                    <div class="formdiv">
                        <div class="formtitle">Join as Guest</div>
                        <div>
                            <div>
                                <input id="username" type="text" name="name" placeholder="Username" />
                            </div>
                            <div>
                                <button class="game-button" id="formSubmit" onclick="playAsGuest()">
                                    Play
                                </button>
                            </div>
                            <div class="error_messages" id="error_message_guest"></div>
                        </div>
                        <!-- play as guest function-->
                        <script>
                            function playAsGuest() {
                                error_message_guest.innerHTML = ""
                                if (!checkCookieAcceptance()) {
                                    error_message_guest.innerHTML = "Accept cookies first"
                                } else {
                                    var username = document.getElementById("username").value;
                                    if (!username) {
                                        error_message_guest.innerHTML = "Add a Username"
                                    } else {
                                        setCookie("username", username)
                                        if (getCookie('username') != null) {
                                            window.open("src/CatTD_lobby.html", "_self");
                                        }
                                    }
                                }
                            }
                            document.getElementById("username").addEventListener("keyup", function (event) {
                                    if (event.key === "Enter") {
                                        playAsGuest()
                                    }
                                });
                        </script>
                    </div>
                </div>



                <!-- Cookie System -->
                <div id="cookiePopup">
                    This website uses cookies to ensure the best experience. <a href="src/ref/privacypolice.html">Learn
                        more</a>.AcceptCookie
                    <button class="game-button" onclick="acceptCookies()">Accept</button>
                </div>

                <script>
                    // Überprüfen, ob bereits akzeptiert wurde
                    function checkCookieAcceptance() {
                        var accepted = getCookie('cookiesAccepted');
                        if (accepted === 'true') {
                            document.getElementById('formSubmit').style.disabled = 'true';
                            return true
                        }
                        return false
                    }

                    // Akzeptieren und ausblenden
                    function acceptCookies() {
                        setCookie('cookiesAccepted', 'true');
                        setCookie("volume", 0.5)
                        document.getElementById('formSubmit').style.disabled = 'false';
                        document.getElementById('cookiePopup').style.display = 'none';
                    }

                    // Prüfen und Anzeigen des Popups
                    if (!checkCookieAcceptance()) {
                        document.getElementById('cookiePopup').style.display = 'block';
                    }
                </script>

            </div>
        </div>
    </div>
    <footer>
        <div>
            <a href="src/ref/imprint.html" class="footer_text">Imprint</a>
            <a href="src/ref/privacypolice.html" class="footer_text">Privacy Policy</a>
        </div>
        <div class="footer_text">© 2024</div>
    </footer>
</body>

</html>
